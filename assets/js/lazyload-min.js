!function(){var t={};function e(n){var o=t[n];return"object"==typeof o?o:(o.exports||(o.exports={},o.exports=o.call(o.exports,e,o.exports,o)||o.exports),o.exports)}function n(e,n){t[e]=n}n("./defaults.js",function(t,e,n){n.exports={root:document,container:!1,elements:".lazy",success:!1,error:!1,offset:2,separator:",",loadingClass:"lazy-loading",successClass:"lazy-loaded",errorClass:"lazy-error",breakpoints:!1,loadInvisible:!1,validateDelay:25,saveViewportOffsetDelay:50,srcset:"data-srcset",src:"data-src"}}),n("./dom.js",function(t,e,n){var o=t("./utils.js"),i=e.setAttr=function(t,e,n){t.setAttribute(e,n)},s=e.getAttr=function(t,e){return t.getAttribute(e)},r=(e.removeAttr=function(t,e){t.removeAttribute(e)},{}),a=e.hasClass=function(t,e){return r[e]||(r[e]=new RegExp("(\\s|^)"+e+"(\\s|$)")),r[e].test(s(t,"class")||"")&&r[e]};e.addClass=function(t,e){a(t,e)||i(t,"class",o.trim(s(t,"class")||"")+" "+e)},e.removeClass=function(t,e){var n;(n=a(t,e))&&i(t,"class",(s(t,"class")||"").replace(n," "))},e.toElements=function(t){if(o.isString(t))return e.querySelectorAll(t);if(t&&t.length){for(var n=[],i=t.length;i--;n.unshift(t[i]));return n}return t?[t]:[]},e.querySelectorAll=function(t,e){if(document.querySelectorAll)e=document.querySelectorAll(t);else{var n=document,o=n.styleSheets[0]||n.createStyleSheet();o.addRule(t,"f:b");for(var i=n.all,s=0,r=[],a=i.length;s<a;s++)i[s].currentStyle.f&&r.push(i[s]);o.removeRule(0),e=r}return e},e.contains=function(t,e,n){if(t==e)return!0;if(!e||!e.nodeType||1!=e.nodeType)return!1;if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(var o=e.parentNode;o&&o!=n;){if(o==t)return!0;o=o.parentNode}return!1},e.equal=function(t,e){return t.nodeName.toLowerCase()===e},e.bindEvent=function(t,e,n){t.attachEvent?t.attachEvent&&t.attachEvent("on"+e,n):t.addEventListener(e,n,{capture:!1,passive:!0})},e.unbindEvent=function(t,e,n){t.detachEvent?t.detachEvent&&t.detachEvent("on"+e,n):t.removeEventListener(e,n,{capture:!1,passive:!0})}}),n("./index.js",function(t,e,n){var o=t("./utils.js"),i=t("./defaults.js"),s=t("./dom.js"),r=t("./loadElement.js");function a(t){this.init(t)}n.exports=a;var l=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,c=function(t,e){t.bottom=(window.innerHeight||document.documentElement.clientHeight)+e,t.right=(window.innerWidth||document.documentElement.clientWidth)+e};o.assign(a.prototype,r,{init:function(t){for(var e in t=t||{},this.options={},i)this.options[e]=t[e]||i[e];this.initContext(),this.render()},initContext:function(){var t=this.options,e=this.context={attrSrc:"src",attrSrcset:"srcset",source:t.src,elements:[],container:s.toElements(t.container)[0]||!1,destroyed:!0,isRetina:l,viewport:{top:0-t.offset,left:0-t.offset},validateT:o.throttle(function(){this.validate()},t.validateDelay,this),saveViewportOffsetT:o.throttle(function(){c(e.viewport,t.offset)},t.validateDelay,this)};c(e.viewport,t.offset),o.each(t.breakpoints,function(t){if(t.width>=window.screen.width)return e.source=t.src,!1})},render:function(){var t=this.options,e=this.context;e.elements=s.toElements(t.elements),e.destroyed&&(e.destroyed=!1,e.container&&s.bindEvent(e.container,"scroll",e.validateT),s.bindEvent(window,"resize",e.saveViewportOffsetT),s.bindEvent(window,"resize",e.validateT),s.bindEvent(window,"scroll",e.validateT)),this.validate()},destroy:function(){this.options;var t=this.context;t.container&&s.unbindEvent(t.container,"scroll",t.validateT),s.unbindEvent(window,"scroll",t.validateT),s.unbindEvent(window,"resize",t.validateT),s.unbindEvent(window,"resize",t.saveViewportOffsetT),t.elements=[],t.destroyed=!0},validate:function(){var t=this.options,e=this.context,n=e.elements,i=n.length;o.each(n,function(n){if(!(s.hasClass(n,e.loadingClass)||s.hasClass(n,t.successClass)||s.hasClass(n,t.errorClass)))return this.elementInView(n)?(this.loadElement(n),void i--):void 0;i--},this),i<=0&&this.destroy()},elementInView:function(t){var e=this.options,n=this.context,i=n.viewport,r=n.container,a=t.getBoundingClientRect();if(s.container&&s.contains(r,t)){var l=r.getBoundingClientRect();if(inView(l,i)){var c=l.top-e.offset,d=l.right+e.offset,u=l.bottom+e.offset,f=l.left-e.offset,v={top:c>i.top?c:i.top,right:d<i.right?d:i.right,bottom:u<i.bottom?u:i.bottom,left:f>i.left?f:i.left};return o.inView(a,v)}return!1}return o.inView(a,i)},load:function(t,e){this.context.elements=s.toElements(t),o.each(t,function(t){this.loadElement(element,e)},this)}})}),n("./loadElement.js",function(t,e,n){var o=t("./utils.js"),i=t("./dom.js");n.exports={handleSourceElement:function(t,e,n){var o=i.getAttr(t,n);o&&i.setAttr(t,e,o)},handleSrcsetElement:function(t,e,n){n&&i.setAttr(t,this.context.attrSrcset,n),t.src=e},loadElementSuccess:function(t){var e=this.options;i.addClass(t,e.successClass),i.removeClass(t,e.loadingClass),e.success&&e.success(t)},loadElementError:function(t,e){var n=this.options;n.error&&n.error(t,e),i.addClass(t,n.errorClass),i.removeClass(t,n.loadingClass)},loadElement:function(t,e){var n=this.options,s=this.context;if(e||n.loadInvisible||t.offsetWidth>0&&t.offsetHeight>0){var r=i.getAttr(t,s.source)||i.getAttr(t,n.src);r?function(t,e,n,s){var r=this,a=i.equal(t,"img"),l=e.split(n.separator),c=l[s.isRetina&&l.length>1?1:0],d=i.getAttr(t,n.srcset),u=t.parentNode,f=u&&i.equal(u,"picture");if(!a&&!o.isUndefined(t.src))return t.src=c,void this.loadElementSuccess(t);var v=new Image,h=function(){r.loadElementError(t,"invalid"),i.unbindEvent(v,"error",h),i.unbindEvent(v,"load",m)},m=function(){a?f||r.handleSrcsetElement(t,c,d):t.style.backgroundImage='url("'+c+'")',r.loadElementSuccess(t),i.unbindEvent(v,"error",h),i.unbindEvent(v,"load",m)};f&&(v=t,o.each(u.getElementsByTagName("source"),function(t){this.handleSourceElement(t,s.attrSrcset,n.srcset)},this)),i.addClass(t,n.loadingClass),i.bindEvent(v,"error",h),i.bindEvent(v,"load",m),this.handleSrcsetElement(v,c,d)}.call(this,t,r,n,s):(i.addClass(t,n.loadingClass),i.equal(t,"video")?(o.each(t.getElementsByTagName("source"),function(t){this.handleSourceElement(t,s.attrSrc,n.src)},this),t.load(),this.loadElementSuccess(t)):this.loadElementError(t,"missing"))}}}}),n("./utils.js",function(t,e,n){var o=e.hasOwnProperty=Object.prototype.hasOwnProperty,i=e.toString=Object.prototype.toString,s=e.each=function(t,e,n){if(t&&e)for(var o=t.length,i=0;i<o&&!1!==e.call(n,t[i],i);i++);};e.trim=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},e.assign=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var i in n)o.call(n,i)&&(t[i]=n[i])}return t},e.isUndefined=function(t){return void 0===t},s(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){e["is"+t]=function(e){return i.call(e)==="[object "+t+"]"}}),e.throttle=function(t,e,n){var o=0;return function(){var i=+new Date;i-o<e||(o=i,t.apply(n,arguments))}},e.inView=function(t,e){return t.right>=e.left&&t.bottom>=e.top&&t.left<=e.right&&t.top<=e.bottom}}),"function"==typeof define&&define.amd?define(e("./index.js")):"object"==typeof exports?module.exports=e("./index.js"):window.HqyLazyload=e("./index.js")}();